<books>
  <div>
    <span if={books.length==0}>loading books ...</span>
    <div each="{books}">
      <a href="javascript:void(0);" onclick={setBook}>{shortHeader}</a>
      <a href="#{id}" onclick={setBook}>{shortHeader}</a>
    </div>
    <chapters></chapters>
  </div>
  <script>
    console.log("BOOKS RUNNING!");
    var self = this;
    
    self.books = [];
    
    M.Events.subscribe("books_loaded", function(books){
      console.log("yup, books loaded...", books);
      self.books = books;
      self.update();
    });
    
    this.setBook = function(e) {
      riot.route("/" + e.item.id);
    }
  </script>
</books>