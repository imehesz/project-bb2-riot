<chapters>
  <div>
    CHAPTERS
    <div each={chapter in chapters}>
      <a href="javascript:void(0);" onclick={setChapter}>{chapter}</a>
    </div>
    <lines></lines>
  </div>
  <script>
    var self = this;
    
    var reset = function() {
      self.chapters = [];
      self.bookObj = null;
      riot.update();
    }
    
    M.Events.subscribe("books_loaded", reset);
    
    M.Events.subscribe('book_changed', function(bookObj) {
      self.bookObj = bookObj;
      
      $.get("https://imehesz.firebaseio.com/bookdata.json?bookId=" + bookObj.bookId, function(data){
        self.chapters = data.chapters;
  	    riot.update();
      });
      
      setChapter(e) {
        riot.route("/" + self.bookObj.bookId + "/" + e.item.chapter);
      }
  	});
  	
  	reset();
  </script>
</chapters>