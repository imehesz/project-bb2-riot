<lines>
  <div>
    LINES
    <div each="{lines}">
      <sup>{id}</sup> {text}
    </div>
  </div>
  
  <script>
    var self = this;
    
    var reset = function() {
      console.log("reset lines...");
      self.lines = [];
      riot.update();
    }
    
    M.Events.subscribe("book_changed", reset);
    
    M.Events.subscribe("chapter_changed", function(o){
      console.log("chapter changed", o);
      $.get("https://imehesz.firebaseio.com/bookdata.json?bookId=" + o.bookId + "&chapterId=" + o.chapterId, function(data){
        self.lines = data.lines;
  	    riot.update();
      });
    });
    
    reset();
  </script>
</lines>